<%@ page language="java" contentType="text/html; charset=UTF-8"  
    pageEncoding="UTF-8"%> 
<%@taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<%-- <%@taglib prefix="spring" uri="http://www.springframework.org/tags" %> --%>
<%@ include file="/WEB-INF/views/layout/header.jsp"%>
<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="#">
<meta charset="EUC-KR">
<script type="text/javascript">
	$(document).on('click','#btnCheck1',function(e){
		e.preventDefault();
		$("#form").submit();
	});
	
	$(document).on('click', '#btnLogOutForm',function(e){
		e.preventDefault();
		location.href = "${pageContext.request.contextPath}/user/logout"
	});
	
	/* $(document).on('click', '#btnCheck2',function(e){
		e.preventDefault();
		$("#formCheck2").submit();
	}); */
	
	$(document).on('click', '#btnCheck2',function(e){
		e.preventDefault();
		var subjectName = $("#SubjectName option:selected").attr('value');
		/* var s_id = login.getSid(); */
		$.ajax({
			url :"${pageContext.request.contextPath}/user/getCheckingSearchInfo",
			type : 'GET',
			data : {
				s_id : '111',
				SubjectName : subjectName
			},
			dataType : "json",
			success : function(data){
		          $('#Context').html(data);
		        
			},
			error:function(request,status,error){
				
			},
			complete : function(data) {
				/* alert("출석체크를 완료하였습니다."); */
				location.reload();
			}
		});
		
	});
	
</script>
	

</head>
<style type="text/css">

.cover{
 	text-align:center;
}
.menu {
  display:inline-block;zoom:1;.display:inline;
}
</style>
<body>
	<div class="container">
		<img src="<spring:url value='/resources/images/Idino.png'/>">
		<h1 class = "align-center">아이디노</h1>	
	</div>
	
	<article>
		<div class="container" role="main">
			<c:if test="${not empty login}">
				<p class="align-center">${login.getName()}님 안녕하세요</p>
				<div class = "cover">
					<form name="formCheck1" id="form" role="form" method="GET" action="${pageContext.request.contextPath}/user/getUserInfo">
						<div class ="menu">
							<input type="hidden" name="sid" value="${login.getName()}" /> 
							<button type="button" class="btn btn-sm btn-primary m-1" id="btnCheck1">출석체크</button>
						</div>
					</form>
					<form name="formCheck2" id="formCheck2" role="form" method="GET" action="${pageContext.request.contextPath}/user/getCheckingInfo">
						<div class=menu>
							<input type="hidden" name="sid" value="${login.getName()}" />
							<button type="button" class="btn btn-sm btn-primary" id="btnCheck2">출석확인</button>
						</div>
					</form>
					<form name="formCheck3" id="form" role="form" method="post" action="${pageContext.request.contextPath}/user/getUserInfo">
						<div class=menu>
							<button type="button" class="btn btn-sm btn-primary" id="btnLogOutForm">취소</button>
						</div>
					</form>
				</div>
			</c:if>
		</div>
	</article>
</body>
</html>