<%@ page language="java" contentType="text/html; charset=UTF-8"  
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<%@ include file="/WEB-INF/views/layout/header.jsp"%>
<%@ include file="/WEB-INF/views/layout/header.jsp"%>
<%-- <%@taglib prefix="spring" uri="http://www.springframework.org/tags" %> --%>     
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<style type="text/css">
.button{
	float: right;
	padding : 5px;
}
</style>
<script type="text/javascript">
	$(document).on('click', '#btnJoinForm',function(e){
		e.preventDefault();
		location.href = "${pageContext.request.contextPath}/user/join"
	});
	
	$(document).on('click', '#btnLoginForm',function(e){
		e.preventDefault();
		location.href = "${pageContext.request.contextPath}/user/login"
	});
	
	$(document).on('click', '#btnLogOutForm',function(e){
		e.preventDefault();
		location.href = "${pageContext.request.contextPath}/user/logout"
	});
	
	$(".checkBtn").click(function){
		var str=""
		var tdArr = new Array();
		var checkBtn = $(this);
		var tr = checkBtn.parent().parent();
		var td = tr.children();
		
		console.log("클릭한 ROW의 모든 데이터 : "+tr.text());
		
		/* var no =td.eq(0).text();
		var no = td.eq(0).text();
		var userid = td.eq(1).text();
		var name = td.eq(2).text();
		var email = td.eq(3).text();
		
		// 반복문을 이용해서 배열에 값을 담아 사용할 수 도 있다.
		td.each(function(i){	
			tdArr.push(td.eq(i).text());
		});
		
		console.log("배열에 담긴 값 : "+tdArr);
		
		str +=	" * 클릭된 Row의 td값 = No. : <font color='red'>" + no + "</font>" +
				", 아이디 : <font color='red'>" + userid + "</font>" +
				", 이름 : <font color='red'>" + name + "</font>" +
				", 이메일 : <font color='red'>" + email + "</font>";		
		
		$("#ex2_Result1").html(" * 클릭한 Row의 모든 데이터 = " + tr.text());		
		$("#ex2_Result2").html(str); */	
	}

</script>
</head>
<body>
<c:if test="${empty login}">
<div class="container">
	<img src="<spring:url value='/resources/images/Idino.png'/>">
	 <div class=button>
		<div class=button>
			<button type="button" class="btn btn-sm btn-primary" id="btnJoinForm">회원가입</button>
		</div>
		<div class=button>
			<button type="button" class="btn btn-sm btn-primary" id="btnLoginForm">로그인</button>
		</div>
	</div>
	<article>
		<div class="container">
			<div class="table-responsive">
				<table class="table table-striped table-sm">
					<colgroup>
						<col style="width:15%;" />
						<col style="width:30&;" />
						<col style="width:20%;" />
						<col style="width:15%;" />
						<col style="width:15%;" />
					</colgroup>
					<thead>
						<tr>
							<th class="align-center">과목코드</th>
							<th class="align-center">과목명</th>
							<th class="align-center">강의시간</th>
							<th class="align-center">출석여부</th>
							<th class="align-center">출석상태</th>
						</tr>
					</thead>
					<tbody>
						<c:choose>
							<c:when test="${empty login }" >
								<tr><td colspan="5" align="center">데이터가 없습니다.</td></tr>
							</c:when> 
							<c:when test="${!empty login}">
								<c:forEach var="takingSubjectList" items="${takingSubjectList}">
									<tr>
										<td class="align-center"><c:out value="${takingSubjectList.getTs_sid()}"/></td>
										<td class="align-center"><c:out value="${takingSubjectList.getTs_name()}"/></td>
										<td class="align-center"><c:out value="${takingSubjectList.getTsS_time()} ~ ${takingSubjectList.getTsE_time()}"/></td>
										<td><input type="button" class="checkBtn" value="출석체크" /></td>
									</tr>
								</c:forEach>
							</c:when>
						</c:choose>
					</tbody>
				</table>
			</div>
		</div>	
	</article>
</div>
</c:if>
<c:if test="${not empty login}">
	<div class="container">
		<img src="<spring:url value='/resources/images/Idino.png'/>">
		<div class=button>
			<p>${login.getName()}님 안녕하세요</p>
			<button type="button" class="btn btn-sm btn-primary" id="btnLogOutForm">로그아웃</button>
		</div>
	</div>
	<article>
		<div class="container">
			<div class="table-responsive">
				<table class="table table-striped table-sm">
					<colgroup>
						<col style="width:15%;" />
						<col style="width:30&;" />
						<col style="width:20%;" />
						<col style="width:15%;" />
						<col style="width:15%;" />
					</colgroup>
					<thead>
						<tr>
							<th class="align-center">과목코드</th>
							<th class="align-center">과목명</th>
							<th class="align-center">강의시간</th>
							<th class="align-center">출석여부</th>
							<th class="align-center">출석상태</th>
						</tr>
					</thead>
					<tbody>
						<c:choose>
							<c:when test="${empty login }" >
								<tr><td colspan="5" align="center">데이터가 없습니다.</td></tr>
							</c:when> 
							<c:when test="${!empty login}">
								<c:forEach var="takingSubjectList" items="${takingSubjectList}">
									<tr>
										<td class="align-center"><c:out value="${takingSubjectList.getTs_sid()}"/></td>
										<td class="align-center"><c:out value="${takingSubjectList.getTs_name()}"/></td>
										<td class="align-center"><c:out value="${takingSubjectList.getTsS_time()} ~ ${takingSubjectList.getTsE_time()}"/></td>
									</tr>
								</c:forEach>
							</c:when>
						</c:choose>
					</tbody>
				</table>
			</div>
		</div>	
	</article>
</c:if>
</body>
</html>

